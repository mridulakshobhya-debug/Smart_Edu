<!-- Unified Navigation Bar -->
<nav>
    <ul>
        <li><span class="nav-logo">ðŸ“š SmartEdu</span></li>
        <li><a href="{{ url_for('main.index') }}">Home</a></li>
        <li><a href="{{ url_for('elearning.index') }}">E-Learning</a></li>
        <li><a href="{{ url_for('elibrary.index') }}">E-Library</a></li>
        {% if current_user.is_authenticated %}
            <li><a href="{{ url_for('main.ai') }}" class="nav-chat-btn" title="AI Assistant">ðŸ’¬ AI Chatbot</a></li>
            <li><a href="{{ url_for('auth.profile') }}" class="nav-user" title="Your Profile">ðŸ‘¤ Profile</a></li>
            <li><a href="{{ url_for('auth.logout') }}">Logout</a></li>
        {% else %}
            <li><a href="#" onclick="showLoginPrompt(event)" class="nav-chat-btn" title="AI Assistant">ðŸ’¬ AI Chatbot</a></li>
            <li><a href="{{ url_for('auth.login') }}">Login</a></li>
            <li><a href="{{ url_for('auth.signup') }}" class="nav-signup">Sign Up</a></li>
        {% endif %}
    </ul>
</nav>

<!-- Login Prompt Modal -->
<div id="login-prompt-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
    <div style="background: white; padding: 2rem; border-radius: 12px; max-width: 400px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); text-align: center;">
        <h2 style="margin: 0 0 1rem 0; color: #1f2937;">Access Required</h2>
        <p style="color: #6b7280; margin: 1rem 0;">Please log in or sign up to access this feature.</p>
        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <a href="{{ url_for('auth.login') }}" style="flex: 1; padding: 0.8rem; background: var(--primary); color: white; border: none; border-radius: 8px; text-decoration: none; font-weight: 600; cursor: pointer;">Login</a>
            <a href="{{ url_for('auth.signup') }}" style="flex: 1; padding: 0.8rem; background: #f3f4f6; color: var(--primary); border: 2px solid var(--primary); border-radius: 8px; text-decoration: none; font-weight: 600; cursor: pointer;">Sign Up</a>
        </div>
        <button onclick="closeLoginPrompt()" style="margin-top: 1rem; background: none; border: none; color: #9ca3af; cursor: pointer; width: 100%;">Dismiss</button>
    </div>
</div>

<script>
function showLoginPrompt(event) {
    event.preventDefault();
    document.getElementById('login-prompt-modal').style.display = 'flex';
}

function closeLoginPrompt() {
    document.getElementById('login-prompt-modal').style.display = 'none';
}

// Close modal when clicking outside
document.getElementById('login-prompt-modal')?.addEventListener('click', function(e) {
    if (e.target === this) {
        closeLoginPrompt();
    }
});
</script>
