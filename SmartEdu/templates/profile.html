{% extends "base.html" %}

{% block content %}
<style>
    .profile-container {
        max-width: 900px;
        margin: 40px auto;
        padding: 20px;
    }

    .profile-header {
        background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        color: var(--text-primary);
        padding: 40px;
        border-radius: 15px;
        margin-bottom: 30px;
        display: flex;
        align-items: center;
        gap: 30px;
    }

    .profile-picture {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        background: var(--bg-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 4em;
        border: 4px solid var(--bg-primary);
    }

    .profile-info h1 {
        margin: 0 0 10px 0;
        font-size: 2em;
    }

    .profile-info p {
        margin: 5px 0;
        opacity: 0.9;
    }

    .profile-section {
        background: var(--bg-primary);
        border-radius: 12px;
        padding: 30px;
        margin-bottom: 25px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .section-title {
        font-size: 1.5em;
        color: var(--primary);
        margin-bottom: 20px;
        border-bottom: 2px solid var(--primary);
        padding-bottom: 10px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--text-primary);
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid var(--border);
        border-radius: 8px;
        font-size: 1em;
        box-sizing: border-box;
        background: var(--bg-secondary);
        color: var(--text-primary);
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 5px rgba(var(--primary-rgb), 0.3);
    }

    .profile-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    .profile-grid .form-group {
        margin-bottom: 0;
    }

    .emoji-search-box {
        margin-bottom: 20px;
    }

    .emoji-search-input {
        width: 100%;
        padding: 12px;
        border: 2px solid var(--border);
        border-radius: 8px;
        font-size: 1em;
        box-sizing: border-box;
        background: var(--bg-secondary);
        color: var(--text-primary);
    }

    .emoji-search-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 5px rgba(var(--primary-rgb), 0.3);
    }

    .emoji-count {
        font-size: 0.9rem;
        color: var(--text-tertiary);
        margin-top: 5px;
    }

    .picture-selection {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        gap: 12px;
        margin-top: 15px;
        max-height: 500px;
        overflow-y: auto;
        padding: 10px;
        background: var(--bg-secondary);
        border-radius: 8px;
        border: 1px solid var(--border);
    }

    .picture-option {
        text-align: center;
        cursor: pointer;
        padding: 8px;
        border: 3px solid var(--border);
        border-radius: 10px;
        transition: all 0.3s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .picture-option:hover {
        border-color: var(--primary);
        transform: scale(1.08);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .picture-option input[type="radio"] {
        display: none;
    }

    .picture-option input[type="radio"]:checked + .picture-display {
        border-color: var(--primary);
        box-shadow: 0 0 12px rgba(var(--primary-rgb), 0.6);
        transform: scale(1.1);
    }

    .picture-display {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: var(--bg-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8em;
        margin: 0 auto 4px;
        border: 2px solid var(--border);
        transition: all 0.3s ease;
    }

    .emoji-label {
        font-size: 0.75rem;
        color: var(--text-tertiary);
        word-break: break-word;
    }

    .no-emoji-results {
        grid-column: 1 / -1;
        text-align: center;
        padding: 20px;
        color: var(--text-tertiary);
    }

    .btn-submit {
        background: var(--primary);
        color: white;
        padding: 12px 30px;
        border: none;
        border-radius: 8px;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-submit:hover {
        background: darken(var(--primary), 10%);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    @media (max-width: 768px) {
        .profile-header {
            flex-direction: column;
            text-align: center;
        }

        .form-row,
        .profile-grid {
            grid-template-columns: 1fr;
        }

        .picture-selection {
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        }
    }
</style>

<div class="profile-container">
    <!-- Profile Header -->
    <div class="profile-header">
        <div class="profile-picture">
            {% if current_user.profile_picture == 'profile_1.png' %}
                üòä
            {% elif current_user.profile_picture == 'profile_2.png' %}
                ü§ì
            {% elif current_user.profile_picture == 'profile_3.png' %}
                üöÄ
            {% elif current_user.profile_picture == 'profile_4.png' %}
                ‚≠ê
            {% elif current_user.profile_picture == 'profile_5.png' %}
                üéì
            {% elif current_user.profile_picture == 'profile_6.png' %}
                üèÜ
            {% else %}
                üë§
            {% endif %}
        </div>
        <div class="profile-info">
            <h1>{{ current_user.full_name or current_user.username }}</h1>
            <p><strong>Username:</strong> {{ current_user.username }}</p>
            <p><strong>Email:</strong> {{ current_user.email }}</p>
            {% if current_user.learning_goal %}
                <p><strong>Learning Goal:</strong> {{ current_user.learning_goal }}</p>
            {% endif %}
        </div>
    </div>

    <!-- Update Profile Picture & Basic Info -->
    <div class="profile-section">
        <h2 class="section-title">üì∏ Profile Picture & Basic Information</h2>
        <form method="POST" action="{{ url_for('auth.profile') }}" id="profileForm">
            <input type="hidden" name="action" value="update_info">
            
            <div class="form-group">
                <label>Choose a Profile Picture</label>
                
                <div class="emoji-search-box">
                    <input type="text" class="emoji-search-input" id="emojiSearch" placeholder="üîç Search emojis... (e.g., smile, heart, star, animal, food)" autocomplete="off">
                    <div class="emoji-count"><span id="emojiCount">144</span> emojis available</div>
                </div>

                <div class="picture-selection" id="emojiContainer">
                    <!-- Emojis will be inserted here by JavaScript -->
                </div>
            </div>

            <div class="profile-grid">
                <div class="form-group">
                    <label for="full_name">Full Name</label>
                    <input type="text" id="full_name" name="full_name" value="{{ current_user.full_name }}" placeholder="Enter your full name">
                </div>

                <div class="form-group">
                    <label for="learning_goal">Learning Goal</label>
                    <input type="text" id="learning_goal" name="learning_goal" value="{{ current_user.learning_goal or '' }}" placeholder="e.g., Master Python Programming">
                </div>
            </div>

            <div class="form-group">
                <label for="heard_from">Where Did You Hear About SmartEdu?</label>
                <select id="heard_from" name="heard_from">
                    <option value="">-- Select an option --</option>
                    <option value="Social Media" {% if current_user.heard_from == 'Social Media' %}selected{% endif %}>Social Media</option>
                    <option value="Search Engine" {% if current_user.heard_from == 'Search Engine' %}selected{% endif %}>Search Engine</option>
                    <option value="Friend/Family" {% if current_user.heard_from == 'Friend/Family' %}selected{% endif %}>Friend/Family</option>
                    <option value="Advertisement" {% if current_user.heard_from == 'Advertisement' %}selected{% endif %}>Advertisement</option>
                    <option value="School/University" {% if current_user.heard_from == 'School/University' %}selected{% endif %}>School/University</option>
                    <option value="Other" {% if current_user.heard_from == 'Other' %}selected{% endif %}>Other</option>
                </select>
            </div>

            <button type="submit" class="btn-submit">Save Changes</button>
        </form>
    </div>

    <!-- Change Username -->
    <div class="profile-section">
        <h2 class="section-title">üë§ Change Username</h2>
        <form method="POST" action="{{ url_for('auth.profile') }}">
            <input type="hidden" name="action" value="change_username">
            
            <div class="form-group">
                <label for="new_username">New Username</label>
                <input type="text" id="new_username" name="new_username" placeholder="Enter your new username" required>
            </div>

            <button type="submit" class="btn-submit">Update Username</button>
        </form>
    </div>

    <!-- Change Password -->
    <div class="profile-section">
        <h2 class="section-title">üîê Change Password</h2>
        <form method="POST" action="{{ url_for('auth.profile') }}">
            <input type="hidden" name="action" value="change_password">
            
            <div class="form-group">
                <label for="old_password">Current Password</label>
                <input type="password" id="old_password" name="old_password" placeholder="Enter your current password" required>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="new_password">New Password</label>
                    <input type="password" id="new_password" name="new_password" placeholder="Enter your new password" required>
                </div>

                <div class="form-group">
                    <label for="confirm_password">Confirm New Password</label>
                    <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirm your new password" required>
                </div>
            </div>

            <button type="submit" class="btn-submit">Change Password</button>
        </form>
    </div>
</div>

<script>
const emojiList = [
    // Smileys & Emotion
    { emoji: 'üòÄ', name: 'grinning smile happy' },
    { emoji: 'üòÉ', name: 'grinning face with big eyes happy' },
    { emoji: 'üòÑ', name: 'grinning face with smiling eyes happy' },
    { emoji: 'üòÅ', name: 'beaming face with smiling eyes happy' },
    { emoji: 'üòÜ', name: 'grinning squinting face laugh' },
    { emoji: 'üòÖ', name: 'grinning face with sweat happy' },
    { emoji: 'ü§£', name: 'rolling on the floor laughing laugh' },
    { emoji: 'üòÇ', name: 'face with tears of joy laugh cry' },
    { emoji: 'üôÇ', name: 'slightly smiling face happy' },
    { emoji: 'üôÉ', name: 'upside down face happy' },
    { emoji: 'üòâ', name: 'winking face' },
    { emoji: 'üòä', name: 'smiling face with smiling eyes happy' },
    { emoji: 'üòá', name: 'smiling face with halo angel' },
    { emoji: 'ü•∞', name: 'smiling face with hearts love' },
    { emoji: 'üòç', name: 'smiling face with heart eyes love' },
    { emoji: 'ü§©', name: 'star struck face excited' },
    { emoji: 'üòò', name: 'face blowing a kiss love' },
    { emoji: 'üòó', name: 'kissing face love' },
    { emoji: 'üòö', name: 'kissing face with closed eyes love' },
    { emoji: 'üòô', name: 'kissing face with smiling eyes love' },
    { emoji: 'ü•≤', name: 'smiling face with tear happy' },
    { emoji: 'üòå', name: 'relieved face content' },
    { emoji: 'üòî', name: 'pensive face sad' },
    { emoji: 'üòí', name: 'unamused face' },
    { emoji: 'üò≤', name: 'astonished face shock' },
    { emoji: '‚òπÔ∏è', name: 'frowning face sad' },
    { emoji: 'üôÅ', name: 'slightly frowning face sad' },
    { emoji: 'üòï', name: 'confused face unsure' },
    { emoji: 'üò†', name: 'angry face angry' },
    { emoji: 'üò°', name: 'pouting face angry' },
    { emoji: 'üòå', name: 'relieved face' },
    { emoji: 'üòë', name: 'expressionless face' },
    { emoji: 'üòê', name: 'neutral face' },
    { emoji: 'üò∂', name: 'face with mouth sealed' },
    { emoji: 'üòè', name: 'smirking face' },
    { emoji: 'üò£', name: 'persevering face' },
    { emoji: 'üòØ', name: 'hushed face surprise' },
    { emoji: 'üò™', name: 'sleepy face tired' },
    { emoji: 'üò´', name: 'tired face exhausted' },
    { emoji: 'ü•±', name: 'yawning face tired' },
    { emoji: 'üò¥', name: 'sleeping face sleep' },
    { emoji: 'üòå', name: 'relieved face' },
    { emoji: 'üò∑', name: 'face with medical mask sick' },
    { emoji: 'ü§í', name: 'face with thermometer sick' },
    { emoji: 'ü§ï', name: 'face with head bandage hurt' },
    { emoji: 'ü§¢', name: 'nauseated face sick' },
    { emoji: 'ü§Æ', name: 'face vomiting sick' },
    { emoji: 'ü§ß', name: 'sneezing face sick' },
    { emoji: 'ü•µ', name: 'hot face hot' },
    { emoji: 'ü•∂', name: 'cold face cold' },
    { emoji: 'ü•¥', name: 'face with dizzy eyes confused' },
    { emoji: 'üòµ', name: 'face with crossed out eyes dizzy' },
    { emoji: 'ü§Ø', name: 'exploding head shocked' },
    { emoji: 'ü§†', name: 'cowboy hat face cowboy' },
    { emoji: 'ü•≥', name: 'partying face party celebrate' },
    { emoji: 'üòé', name: 'smiling face with sunglasses cool' },
    { emoji: 'ü§ì', name: 'nerd face smart intelligent' },
    { emoji: 'üßê', name: 'face with monocle skeptical' },
    { emoji: 'üòï', name: 'confused face' },
    { emoji: 'üòü', name: 'worried face worried' },
    { emoji: 'üôÅ', name: 'slightly frowning face' },
    { emoji: '‚òπÔ∏è', name: 'frowning face sad' },
    
    // Hand Gestures
    { emoji: 'üëã', name: 'waving hand goodbye hello' },
    { emoji: 'ü§ö', name: 'raised back of hand wave' },
    { emoji: 'üñêÔ∏è', name: 'hand with fingers splayed' },
    { emoji: '‚úã', name: 'raised hand stop' },
    { emoji: 'üññ', name: 'vulcan salute live long prosper' },
    { emoji: 'üëå', name: 'ok hand okay good' },
    { emoji: 'ü§å', name: 'pinched fingers italian' },
    { emoji: 'ü§è', name: 'pinching hand small' },
    { emoji: '‚úåÔ∏è', name: 'victory hand peace' },
    { emoji: 'ü§û', name: 'crossed fingers hope' },
    { emoji: 'ü´∞', name: 'hand with index and middle fingers crossed' },
    { emoji: 'ü§ü', name: 'love you gesture hand' },
    { emoji: 'ü§ò', name: 'sign of the horns rock' },
    { emoji: 'ü§ô', name: 'call me hand phone' },
    { emoji: 'üëà', name: 'backhand index pointing left' },
    { emoji: 'üëâ', name: 'backhand index pointing right' },
    { emoji: 'üëÜ', name: 'backhand index pointing up' },
    { emoji: 'üëá', name: 'backhand index pointing down' },
    { emoji: '‚òùÔ∏è', name: 'index pointing up' },
    { emoji: 'üëç', name: 'thumbs up good like' },
    { emoji: 'üëé', name: 'thumbs down dislike bad' },
    { emoji: '‚úä', name: 'raised fist punch' },
    { emoji: 'üëä', name: 'oncoming fist punch' },
    { emoji: 'ü§õ', name: 'left facing fist punch' },
    { emoji: 'ü§ú', name: 'right facing fist punch' },
    { emoji: 'üëè', name: 'clapping hands applause' },
    { emoji: 'üôå', name: 'raising hands celebration' },
    { emoji: 'üëê', name: 'open hands' },
    { emoji: 'ü§≤', name: 'open hands with palms up' },
    { emoji: 'ü§ù', name: 'handshake deal agreement' },
    { emoji: 'ü§û', name: 'crossed fingers' },
    
    // Animals
    { emoji: 'üê∂', name: 'dog face puppy' },
    { emoji: 'üê±', name: 'cat face kitten' },
    { emoji: 'üê≠', name: 'mouse face mouse' },
    { emoji: 'üêπ', name: 'hamster animal' },
    { emoji: 'üê∞', name: 'rabbit face bunny easter' },
    { emoji: 'ü¶ä', name: 'fox animal' },
    { emoji: 'üêª', name: 'bear face animal' },
    { emoji: 'üêº', name: 'panda animal cute' },
    { emoji: 'üê®', name: 'koala animal cute' },
    { emoji: 'üêØ', name: 'tiger face animal' },
    { emoji: 'ü¶Å', name: 'lion face animal' },
    { emoji: 'üêÆ', name: 'cow face animal' },
    { emoji: 'üê∑', name: 'pig face animal' },
    { emoji: 'üê∏', name: 'frog face animal' },
    { emoji: 'üêµ', name: 'monkey face animal' },
    { emoji: 'üôà', name: 'see no evil monkey' },
    { emoji: 'üôâ', name: 'hear no evil monkey' },
    { emoji: 'üôä', name: 'speak no evil monkey' },
    { emoji: 'üêí', name: 'monkey animal' },
    { emoji: 'üêî', name: 'chicken animal farm' },
    { emoji: 'üêß', name: 'penguin animal' },
    { emoji: 'üê¶', name: 'bird animal' },
    { emoji: 'üê§', name: 'baby chick animal' },
    { emoji: 'ü¶Ü', name: 'duck animal' },
    { emoji: 'ü¶Ö', name: 'eagle bird animal' },
    { emoji: 'ü¶â', name: 'owl bird night' },
    { emoji: 'ü¶á', name: 'bat animal night' },
    { emoji: 'üê∫', name: 'wolf face animal' },
    { emoji: 'üêó', name: 'boar animal wild' },
    { emoji: 'üê¥', name: 'horse face animal' },
    { emoji: 'ü¶Ñ', name: 'unicorn horse magical' },
    { emoji: 'üêù', name: 'honeybee insect bee' },
    { emoji: 'ü™±', name: 'basket' },
    { emoji: 'ü¶ã', name: 'butterfly insect' },
    { emoji: 'üêõ', name: 'bug insect' },
    { emoji: 'üêå', name: 'snail animal slow' },
    { emoji: 'üêû', name: 'lady beetle bug insect' },
    { emoji: 'üêú', name: 'ant insect animal' },
    { emoji: 'ü¶ü', name: 'mosquito insect' },
    { emoji: 'ü¶ó', name: 'cricket insect' },
    { emoji: 'üï∑Ô∏è', name: 'spider arachnid' },
    { emoji: 'ü¶Ç', name: 'scorpion arachnid' },
    
    // Food & Drink
    { emoji: 'üçé', name: 'red apple fruit' },
    { emoji: 'üçä', name: 'orange fruit' },
    { emoji: 'üçã', name: 'lemon fruit sour' },
    { emoji: 'üçå', name: 'banana fruit yellow' },
    { emoji: 'üçâ', name: 'watermelon fruit summer' },
    { emoji: 'üçá', name: 'grapes fruit' },
    { emoji: 'üçì', name: 'strawberry fruit red' },
    { emoji: 'üçà', name: 'melon fruit' },
    { emoji: 'üçí', name: 'cherries fruit red' },
    { emoji: 'üçë', name: 'peach fruit' },
    { emoji: 'ü•≠', name: 'mango fruit' },
    { emoji: 'üçç', name: 'pineapple fruit tropical' },
    { emoji: 'ü••', name: 'coconut fruit' },
    { emoji: 'ü•ë', name: 'avocado fruit' },
    { emoji: 'üçÜ', name: 'eggplant vegetable' },
    { emoji: 'üçÖ', name: 'tomato vegetable fruit' },
    { emoji: 'üçÑ', name: 'mushroom vegetable' },
    { emoji: 'ü•ê', name: 'croissant bread bakery' },
    { emoji: 'ü•í', name: 'cucumber vegetable pickle' },
    { emoji: 'ü•¶', name: 'broccoli vegetable' },
    { emoji: 'üå∂Ô∏è', name: 'hot pepper spicy vegetable' },
    { emoji: 'üåΩ', name: 'corn vegetable' },
    { emoji: 'ü•î', name: 'potato vegetable' },
    { emoji: 'üç†', name: 'roasted sweet potato food' },
    { emoji: 'ü•ê', name: 'croissant' },
    { emoji: 'üçû', name: 'bread loaf bakery' },
    { emoji: 'ü•ñ', name: 'baguette bread french' },
    { emoji: 'ü•®', name: 'pretzel bread salty' },
    { emoji: 'üßÄ', name: 'cheese dairy food' },
    { emoji: 'ü•ö', name: 'egg food breakfast' },
    { emoji: 'üç≥', name: 'cooking fried egg food breakfast' },
    { emoji: 'üßà', name: 'butter dairy' },
    { emoji: 'ü•û', name: 'pancakes breakfast food' },
    { emoji: 'ü•ì', name: 'bacon meat breakfast food' },
    { emoji: 'ü•û', name: 'pancakes' },
    { emoji: 'üçñ', name: 'meat on bone food meat' },
    { emoji: 'üçó', name: 'poultry leg food meat chicken' },
    { emoji: 'üå≠', name: 'hot dog food sandwich' },
    { emoji: 'üçî', name: 'hamburger food sandwich' },
    { emoji: 'üçü', name: 'french fries food potato' },
    { emoji: 'üçï', name: 'pizza food italian' },
    { emoji: 'ü•™', name: 'sandwich bread food' },
    { emoji: 'ü•ô', name: 'stuffed flatbread food' },
    { emoji: 'üßÜ', name: 'falafel food' },
    { emoji: 'üåÆ', name: 'taco food mexican' },
    { emoji: 'üåØ', name: 'burrito food wrap' },
    { emoji: 'ü•ó', name: 'green salad food vegetables' },
    { emoji: 'ü•ò', name: 'shallow pan of food paella food' },
    { emoji: 'üçù', name: 'spaghetti pasta food italian' },
    { emoji: 'üçú', name: 'steaming bowl noodles food asian' },
    { emoji: 'üç≤', name: 'pot of food stew soup food' },
    { emoji: 'üçõ', name: 'curry rice food spicy indian' },
    { emoji: 'üç£', name: 'sushi food japanese raw fish' },
    { emoji: 'üç±', name: 'bento box food japanese' },
    { emoji: 'ü•ü', name: 'dumpling food asian' },
    { emoji: 'ü¶™', name: 'oyster seafood shellfish' },
    { emoji: 'üç§', name: 'shrimp seafood food' },
    { emoji: 'üçô', name: 'rice ball food japanese' },
    { emoji: 'üçö', name: 'cooked rice food' },
    { emoji: 'üçö', name: 'rice' },
    { emoji: 'üçò', name: 'rice cracker food' },
    { emoji: 'üç•', name: 'fish cake with swirl food japanese' },
    { emoji: 'ü•†', name: 'fortune cookie food' },
    { emoji: 'ü•Æ', name: 'moon cake food asian' },
    { emoji: 'üç¢', name: 'oden food japanese' },
    { emoji: 'üç°', name: 'dango food japanese' },
    { emoji: 'üçß', name: 'shaved ice food dessert' },
    { emoji: 'üç®', name: 'ice cream food dessert frozen' },
    { emoji: 'üç¶', name: 'soft ice cream food dessert frozen' },
    { emoji: 'üç∞', name: 'cake food dessert sweet' },
    { emoji: 'üéÇ', name: 'birthday cake food dessert sweet' },
    { emoji: 'üßÅ', name: 'cupcake food dessert' },
    { emoji: 'üçÆ', name: 'custard food dessert' },
    { emoji: 'üç≠', name: 'lollipop candy food sweet' },
    { emoji: 'üç¨', name: 'candy food sweet' },
    { emoji: 'üç´', name: 'chocolate bar food dessert' },
    { emoji: 'üçø', name: 'popcorn food snack movie' },
    { emoji: 'üç©', name: 'doughnut donut food sweet' },
    { emoji: 'üç™', name: 'cookie food dessert biscuit' },
    { emoji: 'üå∞', name: 'chestnut nut food' },
    { emoji: 'üçº', name: 'baby bottle food drink milk' },
    { emoji: '‚òï', name: 'hot beverage coffee tea drink' },
    { emoji: 'üçµ', name: 'teacup without handle tea drink hot' },
    { emoji: 'üç∂', name: 'sake wine food drink' },
    { emoji: 'üçæ', name: 'bottle with popping cork champagne celebration' },
    { emoji: 'üç∑', name: 'wine glass drink alcohol red wine' },
    { emoji: 'üç∏', name: 'cocktail glass drink alcohol' },
    { emoji: 'üçπ', name: 'tropical drink food drink' },
    { emoji: 'üç∫', name: 'beer mug drink alcohol' },
    { emoji: 'üçª', name: 'clinking beer mugs drink alcohol celebration' },
    { emoji: 'ü•Ç', name: 'clinking glasses celebration champagne' },
    { emoji: 'ü•É', name: 'bowl with spoon food' },
    
    // Objects & Symbols
    { emoji: '‚≠ê', name: 'star favorite excellent bright' },
    { emoji: '‚ú®', name: 'sparkles magical shine bright' },
    { emoji: 'üåü', name: 'glowing star bright shiny' },
    { emoji: 'üí´', name: 'dizzy dizziness' },
    { emoji: 'üí•', name: 'explosion boom bang' },
    { emoji: '‚ù§Ô∏è', name: 'red heart love valentine' },
    { emoji: 'üß°', name: 'orange heart love' },
    { emoji: 'üíõ', name: 'yellow heart love happy' },
    { emoji: 'üíö', name: 'green heart love nature' },
    { emoji: 'üíô', name: 'blue heart love calm' },
    { emoji: 'üíú', name: 'purple heart love royal' },
    { emoji: 'üñ§', name: 'black heart love dark' },
    { emoji: 'ü§ç', name: 'white heart love pure' },
    { emoji: 'ü§é', name: 'brown heart love' },
    { emoji: 'üíî', name: 'broken heart sad heartbreak' },
    { emoji: 'üí¢', name: 'anger symbol angry' },
    { emoji: 'üíû', name: 'revolving hearts love couple' },
    { emoji: 'üíì', name: 'beating heart love heartbeat' },
    { emoji: 'üíó', name: 'growing heart love emotion' },
    { emoji: 'üíñ', name: 'sparkling heart love shine' },
    { emoji: 'üíò', name: 'cupid love arrow' },
    { emoji: 'üíù', name: 'heart with ribbon gift love' },
    { emoji: 'üíü', name: 'heart decoration love' },
    { emoji: 'üëë', name: 'crown royal king queen' },
    { emoji: 'üéì', name: 'graduation cap mortarboard education learn' },
    { emoji: 'üéÅ', name: 'wrapped gift present birthday' },
    { emoji: 'üéÄ', name: 'ribbon bow gift' },
    { emoji: 'üéä', name: 'confetti ball celebration party' },
    { emoji: 'üéâ', name: 'party popper celebration party' },
    { emoji: 'üéà', name: 'balloon party celebrate' },
    { emoji: '‚öΩ', name: 'soccer ball sport football' },
    { emoji: 'üèÄ', name: 'basketball sport ball' },
    { emoji: 'üèà', name: 'american football sport' },
    { emoji: '‚öæ', name: 'baseball sport ball' },
    { emoji: 'üéæ', name: 'tennis ball sport racket' },
    { emoji: 'üèê', name: 'volleyball sport ball' },
    { emoji: 'üèâ', name: 'rugby football sport' },
    { emoji: 'ü•è', name: 'cricket game sport' },
    { emoji: 'üé±', name: 'pool 8 ball sport game' },
    { emoji: 'üé≥', name: 'bowling sport pins' },
    { emoji: 'üé£', name: 'fishing pole sport fish' },
    { emoji: 'üéΩ', name: 'running shirt sport athletic' },
    { emoji: 'üéø', name: 'skis winter sport snow' },
    { emoji: '‚õ∏Ô∏è', name: 'ice skate winter sport' },
    { emoji: 'ü•å', name: 'curling stone winter sport' },
    { emoji: 'üõ∑', name: 'sled winter sport' },
    { emoji: 'üõπ', name: 'skateboard sport' },
    { emoji: 'üõº', name: 'roller skate sport' },
    { emoji: 'üõª', name: 'pickup truck' },
    { emoji: 'üé™', name: 'circus tent fun entertainment' },
    { emoji: 'üé®', name: 'artist palette art paint create' },
    { emoji: 'üé¨', name: 'clapper board movie film cinema' },
    { emoji: 'üé§', name: 'microphone sing music' },
    { emoji: 'üéß', name: 'headphones music listen audio' },
    { emoji: 'üéº', name: 'musical score music notes' },
    { emoji: 'üéπ', name: 'musical keyboard piano instrument' },
    { emoji: 'ü•Å', name: 'drum music percussion instrument' },
    { emoji: 'üé∑', name: 'saxophone music instrument jazz' },
    { emoji: 'üé∫', name: 'trumpet music instrument' },
    { emoji: 'üé∏', name: 'guitar music instrument rock' },
    { emoji: 'üéª', name: 'violin music instrument classical' },
    { emoji: 'üé≤', name: 'dice game gambling' },
    { emoji: 'üß©', name: 'puzzle piece game puzzle' },
    { emoji: 'üöÄ', name: 'rocket space launch explore' },
    { emoji: '‚úàÔ∏è', name: 'airplane travel flight' },
    { emoji: 'üöÅ', name: 'helicopter aircraft' },
    { emoji: 'üõ∏', name: 'flying saucer ufo space alien' },
    { emoji: 'üöÇ', name: 'locomotive train transport' },
    { emoji: 'üöÉ', name: 'railway car train transport' },
    { emoji: 'üöÑ', name: 'high speed train transport' },
    { emoji: 'üöÖ', name: 'bullet train transport fast' },
    { emoji: 'üöÜ', name: 'train transport' },
    { emoji: 'üöá', name: 'metro subway underground' },
    { emoji: 'üöà', name: 'light rail train transport' },
    { emoji: 'üöâ', name: 'station transport' },
    { emoji: 'üöä', name: 'tram transport electric' },
    { emoji: 'üöù', name: 'mountain cableway transport' },
    { emoji: 'üöû', name: 'mountain railway transport' },
    { emoji: 'üöã', name: 'tram car transport' },
    { emoji: 'üöå', name: 'bus transport vehicle' },
    { emoji: 'üöç', name: 'oncoming bus transport' },
    { emoji: 'üöé', name: 'trolleybus transport' },
    { emoji: 'üöê', name: 'minibus transport' },
    { emoji: 'üöë', name: 'ambulance emergency health medical' },
    { emoji: 'üöí', name: 'fire engine emergency firefighter' },
    { emoji: 'üöì', name: 'police car emergency law enforcement' },
    { emoji: 'üöî', name: 'oncoming police car emergency' },
    { emoji: 'üöï', name: 'taxi vehicle transport' },
    { emoji: 'üöñ', name: 'oncoming taxi vehicle' },
    { emoji: 'üöó', name: 'automobile car vehicle transport' },
    { emoji: 'üöò', name: 'oncoming automobile car vehicle' },
    { emoji: 'üöô', name: 'sport utility vehicle suv car' },
    { emoji: 'üöö', name: 'delivery truck vehicle cargo' },
    { emoji: 'üöõ', name: 'articulated lorry truck cargo' },
    { emoji: 'üöú', name: 'tractor vehicle farm' },
    { emoji: 'üèéÔ∏è', name: 'racing car sports car fast' },
    { emoji: 'üèçÔ∏è', name: 'motorcycle sport bike' },
    { emoji: 'üõµ', name: 'motor scooter vehicle' },
    { emoji: 'ü¶Ø', name: 'white cane blind stick' },
    { emoji: 'ü¶Ω', name: 'manual wheelchair disability' },
    { emoji: 'ü¶º', name: 'motorized wheelchair disability' },
    { emoji: 'üõ∫', name: 'auto rickshaw transport' },
    { emoji: '‚õΩ', name: 'fuel pump gas station' },
    { emoji: 'üÖøÔ∏è', name: 'parking button sign' },
];

function initializeEmojis() {
    const container = document.getElementById('emojiContainer');
    const currentProfile = '{{ current_user.profile_picture }}';
    
    emojiList.forEach((item, index) => {
        const label = document.createElement('label');
        label.className = 'picture-option';
        
        const input = document.createElement('input');
        input.type = 'radio';
        input.name = 'profile_picture';
        input.value = `emoji_${index}`;
        input.dataset.emoji = item.emoji;
        input.dataset.name = item.name;
        
        if (currentProfile === `emoji_${index}`) {
            input.checked = true;
        }
        
        const display = document.createElement('div');
        display.className = 'picture-display';
        display.textContent = item.emoji;
        
        const nameSpan = document.createElement('span');
        nameSpan.className = 'emoji-label';
        nameSpan.textContent = item.name.split(' ')[0];
        
        label.appendChild(input);
        label.appendChild(display);
        label.appendChild(nameSpan);
        container.appendChild(label);
    });
}

function filterEmojis() {
    const searchInput = document.getElementById('emojiSearch');
    const query = searchInput.value.toLowerCase().trim();
    const options = document.querySelectorAll('.picture-option');
    let visibleCount = 0;
    
    options.forEach(option => {
        const input = option.querySelector('input');
        const emoji = input.dataset.emoji;
        const name = input.dataset.name;
        
        if (query === '' || name.includes(query)) {
            option.style.display = 'flex';
            visibleCount++;
        } else {
            option.style.display = 'none';
        }
    });
    
    const container = document.getElementById('emojiContainer');
    if (visibleCount === 0) {
        if (!document.querySelector('.no-emoji-results')) {
            const noResults = document.createElement('div');
            noResults.className = 'no-emoji-results';
            noResults.textContent = `No emojis found matching "${query}"`;
            container.appendChild(noResults);
        }
    } else {
        const existing = document.querySelector('.no-emoji-results');
        if (existing) existing.remove();
    }
    
    document.getElementById('emojiCount').textContent = visibleCount;
}

document.addEventListener('DOMContentLoaded', function() {
    initializeEmojis();
    
    const searchInput = document.getElementById('emojiSearch');
    searchInput.addEventListener('input', filterEmojis);
    
    // Update profile header emoji when selection changes
    const profileForm = document.getElementById('profileForm');
    if (profileForm) {
        profileForm.addEventListener('change', function(e) {
            if (e.target.name === 'profile_picture' && e.target.checked) {
                const emoji = e.target.dataset.emoji;
                const header = document.querySelector('.profile-picture');
                if (header) {
                    header.textContent = emoji;
                }
            }
        });
    }
});
</script>

{% endblock %}
